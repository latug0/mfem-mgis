#!/bin/bash
ldadd() {
    if [ -d "$1" ] && [[ ":$LD_LIBRARY_PATH:" != *":$1:"* ]]; then
        LD_LIBRARY_PATH="$1${LD_LIBRARY_PATH:+":$LD_LIBRARY_PATH"}"
    fi
}
pathadd() {
    if [ -d "$1" ] && [[ ":$PATH:" != *":$1:"* ]]; then
        PATH="$1${PATH:+":$PATH"}"
    fi
}

incsearch() {
    RESULT=""
    if [[ ":$1:" != *":$2:"* ]]; then
	# Search in a list of include directories $1, the one related to $2
        TMP="$(echo ";$1;" |sed -e "s#.*;\([^;]*$2[^;]*\);.*#\1#")"
	# Go up from one directory
	if [ -d "${TMP}" ]; then
	    RESULT="$(dirname "$TMP")"
	fi
    fi
    echo "$RESULT"
}

liblist() {
    RESULT="$(echo "$1" | sed -e 's#;# #g')"
    echo "$RESULT"
}

inclist() {
    RESULT="$(echo "$1" | sed -e 's#;\|^# -I#g')"
    echo "$RESULT"
}

export MFEM_INCLUDE_DIRS="@MFEM_INCLUDE_DIRS@"
export MFEM_LIB_LIST="@MFEM_LIB_LIST@"

export MFEM_LIB_MAKE="$(liblist "$MFEM_LIB_LIST")"
export MFEM_INC_MAKE="$(inclist "$MFEM_INCLUDE_DIRS")"

export MFEM_DIR="@MFEM_DIR@"
export MFEMMGIS_DIR="@CMAKE_INSTALL_PREFIX@/@EXPORT_INSTALL_PATH@"
export MFrontGenericInterface_DIR="@MFrontGenericInterface_DIR@"

for onelib in "${MFEM_LIB_MAKE}"; do
    ldadd "$(dirname $onelib)"
done

pathadd "@MFRONT_PATH@"
pathadd "@MPICXX_PATH@"
pathadd "@CMAKE_CP_PATH@"
export PATH

ldadd "@TFEL_LIBRARY_PATH@"
ldadd "@MFrontGenericInterface_DIR@/../../../lib"
export LD_LIBRARY_PATH

export CC=@CMAKE_C_COMPILER@
export CXX=@CMAKE_CXX_COMPILER@
export MFEMMGIS_CXX=@MFEMMGIS_CXX@




